name: Deployment to Azure App Service

on:
    push:
        branches: [ "test-branch" ]
permissions:
      id-token: write
      contents: read
jobs:
    build:
        runs-on: ubuntu-latest

        steps:
            - name: Checkout Code
              uses: actions/checkout@v4

            - name: Set up Node.js
              uses: actions/setup-node@v4
              with:
                node-version: '18'

            - name: Install dependencies
              run: |
                cd frontend
                npm install 
              
            - name: Build Frontend Node
              run: |
                cd frontend
                pwd
                CI=false npm run build

            - name: Check if build folder present
              run: |
                cd frontend
                ls

            - name: Move build file from frontend to backedn
              run: |
                mv ./frontend/build ./backend
            
            - name: Check build folder in backend
              run: |
                cd backend
                ls
            
            